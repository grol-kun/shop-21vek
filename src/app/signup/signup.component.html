<div class="dialog_wrapper_signup">

  <!-- Хедер -->
  <div class="styles_headerModal">

    <div *ngIf="showSubContent === 2">
      <button aria-label="Назад" type="button" class="styles_navigation" (click)="showSubContent=1">
        <div class="styles_backIcon" role="presentation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM13.3636 6.3636L8.36349 11.3636L7.72707 12L8.36349 12.6364L13.3636 17.6364L14.6364 16.3636L10.2727 12L14.6364 7.6364L13.3636 6.3636Z"
              fill="currentColor"></path>
          </svg>
        </div>
        <span>Назад</span>
      </button>
    </div>

    <div class="styles_container" aria-label="Закрыть">
      <div class="styles_closePopupIcon">
        <div class="" role="presentation">
          <svg mat-dialog-close xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M5.63642 4.3636C5.28495 4.01213 4.7151 4.01213 4.36363 4.3636C4.01216 4.71508 4.01216 5.28492 4.36363 5.6364L10.7272 12L4.36363 18.3636C4.01216 18.7151 4.01216 19.2849 4.36363 19.6364C4.7151 19.9879 5.28495 19.9879 5.63642 19.6364L12 13.2728L18.3636 19.6364C18.7151 19.9879 19.285 19.9879 19.6364 19.6364C19.9879 19.2849 19.9879 18.7151 19.6364 18.3636L13.2728 12L19.6364 5.6364C19.9879 5.28492 19.9879 4.71508 19.6364 4.3636C19.2849 4.01213 18.7151 4.01213 18.3636 4.3636L12 10.7272L5.63642 4.3636Z"
              fill="currentColor"></path>
          </svg>
        </div>
      </div>
    </div>

  </div>

  <div mat-dialog-content class="" [ngSwitch]="showSubContent">
    <!-- Форма входа -->
    <div class="sign-forms-wrapper" *ngSwitchCase="1">
      <form class="style_form" [formGroup]="signupForm" (ngSubmit)="onAuthSubmit()">

        <h5 class="style_formTitle">Вход</h5>
        <div class="login_form">
          <div class="style_inputComponent">

            <div class="style_labelWrapper">
              <label for="inputEmail">Электронная почта</label>
            </div>

            <div class="style_inputContainer">
              <mat-form-field class="full-width" appearance="standard">
                <input type="email" matInput formControlName="email" id="inputEmail" placeholder="" value=""
                  autocomplete="username">
              </mat-form-field>
            </div>

            <div *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched"
              class="input-error-message styles_error">
              <span class="input-error-message__icon-wrapper">
                <svg class="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM6.85714 8.57143C6.85714 9.04482 6.47339 9.42857 6 9.42857C5.52661 9.42857 5.14286 9.04482 5.14286 8.57143C5.14286 8.09804 5.52661 7.71429 6 7.71429C6.47339 7.71429 6.85714 8.09804 6.85714 8.57143ZM6.85714 3H5.14286V6.85714H6.85714V3Z"
                    fill="currentColor">
                  </path>
                </svg>
              </span>

              <span *ngIf="signupForm.get('email')?.errors?.['required']"
                class="input-error-message__message">Электронная почта не указана</span>

              <span *ngIf="signupForm.get('email')?.errors?.['mailFormatError']
                && !signupForm.get('email')?.errors?.['required']
                && !signupForm.get('email')?.errors?.['existError']"
                class="input-error-message__message">Неправильный формат электронной почты</span>

              <span *ngIf="signupForm.get('email')?.errors?.['existError']" class="input-error-message__message">Нет такого аккаунта.
                <button class="styles_reactButton styles_link enter_link_register" type="button"
                  (click)="showSubContent=2">Зарегистрироваться?
                </button>
              </span>

            </div>
          </div>

          <!-- Пока не реализовывал -->
          <!-- <button class="styles_reactButton styles_link" type="button">Забыли пароль</button> -->

          <div class="style_inputComponent">
            <div class="style_labelWrapper">
              <label for="inputPassword">Пароль</label>
            </div>

            <div class="style_inputContainer">
              <mat-form-field class="full-width" appearance="standard">
                <input matInput type="password" formControlName="password" id="inputPassword"
                  [type]="hide ? 'password' : 'text'" autocomplete="current-password">
                <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hide">
                  <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
              </mat-form-field>
            </div>

            <div *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched"
              class="input-error-message styles_error">
              <span class="input-error-message__icon-wrapper">
                <svg class="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM6.85714 8.57143C6.85714 9.04482 6.47339 9.42857 6 9.42857C5.52661 9.42857 5.14286 9.04482 5.14286 8.57143C5.14286 8.09804 5.52661 7.71429 6 7.71429C6.47339 7.71429 6.85714 8.09804 6.85714 8.57143ZM6.85714 3H5.14286V6.85714H6.85714V3Z"
                    fill="currentColor">
                  </path>
                </svg>
              </span>
              <span class="input-error-message__message">Пароль не указан</span>
            </div>
          </div>

          <div class="style_agreementTextWrapper">
            <span class="style_icon">
              <svg class="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM6.85714 8.57143C6.85714 9.04482 6.47339 9.42857 6 9.42857C5.52661 9.42857 5.14286 9.04482 5.14286 8.57143C5.14286 8.09804 5.52661 7.71429 6 7.71429C6.47339 7.71429 6.85714 8.09804 6.85714 8.57143ZM6.85714 3H5.14286V6.85714H6.85714V3Z"
                  fill="currentColor"></path>
              </svg>
            </span>
            <div>Нажимая «Войти», вы соглашаетесь с&nbsp;
              <a class="Link_link__2obj_ Link_underline__1ljxF style_link" href="/services/personal_data.html"
                target="_blank">политикой обработки персональных данных
              </a>
            </div>
          </div>

          <div class="style_actions">
            <button class="styles_reactButton style_baseActionButton styles_submitButton" type="submit"
              (click)="onAuthSubmit()">Войти</button>
          </div>

          <div class="styles_bottomLinks">
            <div>
              <button class="styles_reactButton styles_link" type="button"
                (click)="showRegistrForm()">Регистрация</button>
            </div>
          </div>

        </div>
      </form>
    </div>


    <!-- Регистрация -->

    <div class="sign-forms-wrapper" *ngSwitchCase="2">
      <form class="style_form styles_bottomIndent" [formGroup]="registrForm" (ngSubmit)="onRegSubmit()" #regForm>
        <h5 class="style_formTitle">Регистрация</h5>

        <div class="style_inputComponent">

          <div class="style_labelWrapper">
            <label for="inputEmailReg">Электронная почта</label>
          </div>

          <div class="style_inputContainer">
            <mat-form-field class="full-width" appearance="standard">
              <input type="email" matInput formControlName="emailReg" id="inputEmailReg" placeholder="" value="">
            </mat-form-field>
          </div>

          <div *ngIf="registrForm.get('emailReg')?.invalid && registrForm.get('emailReg')?.touched"
            class="input-error-message styles_error">

            <span class="input-error-message__icon-wrapper">
              <svg class="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM6.85714 8.57143C6.85714 9.04482 6.47339 9.42857 6 9.42857C5.52661 9.42857 5.14286 9.04482 5.14286 8.57143C5.14286 8.09804 5.52661 7.71429 6 7.71429C6.47339 7.71429 6.85714 8.09804 6.85714 8.57143ZM6.85714 3H5.14286V6.85714H6.85714V3Z"
                  fill="currentColor">
                </path>
              </svg>
            </span>

            <span *ngIf="registrForm.get('emailReg')?.errors?.['required']"
              class="input-error-message__message">Электронная почта не указана</span>

            <span *ngIf="registrForm.get('emailReg')?.errors?.['mailFormatError']
            && !registrForm.get('emailReg')?.errors?.['required']
            && !registrForm.get('emailReg')?.errors?.['nameError']" class="input-error-message__message">Неправильный
              формат электронной почты</span>

            <span *ngIf="registrForm.get('emailReg')?.errors?.['nameError']"
              class="input-error-message__message">Аккаунт зарегистрирован.
              <button class="styles_reactButton styles_link enter_link_register" type="button"
                (click)="showSubContent=1">Войти?
              </button>
            </span>

          </div>

        </div>

        <div class="style_agreementTextWrapper">

          <span class="style_icon">
            <svg class="" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11ZM6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM6.85714 8.57143C6.85714 9.04482 6.47339 9.42857 6 9.42857C5.52661 9.42857 5.14286 9.04482 5.14286 8.57143C5.14286 8.09804 5.52661 7.71429 6 7.71429C6.47339 7.71429 6.85714 8.09804 6.85714 8.57143ZM6.85714 3H5.14286V6.85714H6.85714V3Z"
                fill="currentColor"></path>
            </svg>
          </span>

          <div>Нажимая «Продолжить», вы соглашаетесь с&nbsp;
            <a class="Link_link__2obj_ Link_underline__1ljxF style_link" href="/services/personal_data.html"
              target="_blank">политикой обработки персональных данных
            </a>
          </div>
        </div>

        <div class="style_actions">
          <button class="styles_reactButton styles_submitButton" type="submit"
            (click)="onRegSubmit()">Продолжить</button>
        </div>
      </form>
    </div>


    <!-- Форма успешной регистрации -->

    <div *ngSwitchCase="3">
      <div class="styles_successMessageWrapper">
        <img class="styles_successImage" src="../../assets/img/illustration-success-1x.webp"
          alt="Успешная Регистрация!">
        <h5 class="styles_successTitle">Вы зарегистрированы</h5>
        <p class="styles_successText">Письмо с паролем отправлено на вашу почту, если письма нет — проверьте
          папку «Спам».</p>
        <button class="styles_reactButton style_baseActionButton" type="button"
          (click)="showSubContent=1">Войти</button>
      </div>
    </div>

  </div>
  <!--- Log the FormGroup values to see if the binding is working -->
  <!-- <pre><p>Form value {{ signupForm.value | json }} </p></pre>
  <p> Form status {{ signupForm.status | json}} </p> -->
</div>
